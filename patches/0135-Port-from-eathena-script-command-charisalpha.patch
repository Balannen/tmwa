From 35c559b12a495836875fcd34c97c36279b17c589 Mon Sep 17 00:00:00 2001
From: Andrei Karas <akaras@inbox.ru>
Date: Thu, 23 Dec 2010 03:47:48 +0200
Subject: [PATCH 135/226] Port from eathena script command charisalpha.

---
 src/map/script.c | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

diff --git a/src/map/script.c b/src/map/script.c
index 2870dce..287f0c7 100644
--- a/src/map/script.c
+++ b/src/map/script.c
@@ -429,6 +429,7 @@ int  buildin_dispbottom (struct script_state *st); //added from jA [Lupus]
 int  buildin_recovery (struct script_state *st); // [4144]
 int  buildin_getmapmobs (struct script_state *st); //end jA addition
 int  buildin_getstrlen (struct script_state *st); //strlen [Valaris]
+int  buildin_charisalpha (struct script_state *st); //isalpha [Valaris]
 
 void push_val (struct script_stack *stack, int type, int val);
 int  run_func (struct script_state *st);
@@ -884,6 +885,8 @@ struct
     buildin_getmapmobs, "getmapmobs", "s"}, //end jA addition
     {
     buildin_getstrlen, "getstrlen", "s"}, //strlen [Valaris]
+    {
+    buildin_charisalpha, "charisalpha", "si"}, //isalpha [Valaris]
         // End Additions
     {
 NULL, NULL, NULL},};
@@ -8239,6 +8242,24 @@ BUILDIN_FUNC(getstrlen)
     return 0;
 }
 
+//=======================================================
+// isalpha [Valaris]
+//-------------------------------------------------------
+BUILDIN_FUNC(charisalpha)
+{
+    const char *str = script_getstr(st, 2);
+    int pos = script_getnum(st, 3);
+
+    if (!str || pos < 0 || (unsigned int)pos >= strlen(str) || !ISALPHA(str[pos]))
+    {
+        script_pushint(st, 0);
+        return 0;
+    }
+
+    script_pushint(st, 1);
+    return 0;
+}
+
 //
 // ��s��main
 //
-- 
2.1.0

