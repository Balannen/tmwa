From fdd2e1f9484bd4e62d86a10c6eac0978f618be39 Mon Sep 17 00:00:00 2001
From: Andrei Karas <akaras@inbox.ru>
Date: Mon, 27 Dec 2010 19:30:15 +0200
Subject: [PATCH 149/226] Add script command l.

Now it translate to const language with id 1.
---
 src/map/lang.c   |  2 +-
 src/map/script.c | 10 ++++++++++
 2 files changed, 11 insertions(+), 1 deletion(-)

diff --git a/src/map/lang.c b/src/map/lang.c
index 3024f65..78c567f 100644
--- a/src/map/lang.c
+++ b/src/map/lang.c
@@ -129,7 +129,7 @@ const char* lang_trans(const char *str, int lng)
 
     if (!strings[lng])
     {
-        printf ("no lang string (%d) for: %s\n", lang_langs[lng], str);
+        printf ("no lang string (%s) for: %s\n", lang_langs[lng], str);
         return str;
     }
 
diff --git a/src/map/script.c b/src/map/script.c
index 9cf2c7a..d05c96c 100644
--- a/src/map/script.c
+++ b/src/map/script.c
@@ -450,6 +450,7 @@ int  buildin_equip (struct script_state *st);
 int  buildin_setitemscript (struct script_state *st); //Set NEW item bonus script. Lupus
 int  buildin_setnpcclass (struct script_state *st); // [4144]
 int  buildin_getnpcclass (struct script_state *st); // [4144]
+int  buildin_l (struct script_state *st); // [4144]
 
 void push_val (struct script_stack *stack, int type, int val);
 int  run_func (struct script_state *st);
@@ -941,6 +942,8 @@ struct
     buildin_setnpcclass, "setnpcclass", "*"}, // [4144]
     {
     buildin_getnpcclass, "getnpcclass", "*"}, // [4144]
+    {
+    buildin_l, "l", "s"}, // [4144]
         // End Additions
     {
 NULL, NULL, NULL},};
@@ -8791,6 +8794,13 @@ BUILDIN_FUNC(getnpcclass)
     return 0;
 }
 
+BUILDIN_FUNC(l)
+{
+    char *str = script_getstr(st, 2);
+    script_pushstr(st, (unsigned char *)lang_trans (str, 1));
+    return 0;
+}
+
 //
 // ��s��main
 //
-- 
2.1.0

