From 54ee2cd991fcc574d13719be0362860131994efb Mon Sep 17 00:00:00 2001
From: Andrei Karas <akaras@inbox.ru>
Date: Fri, 7 Jan 2011 21:40:40 +0200
Subject: [PATCH 174/226] Comment some code to avoid change hardcoded low
 classes if started/stoped riding.

---
 src/map/atcommand.c | 52 ++++++++++++++++++++++++++--------------------------
 src/map/clif.c      |  6 +++---
 src/map/pc.c        |  4 ++--
 3 files changed, 31 insertions(+), 31 deletions(-)

diff --git a/src/map/atcommand.c b/src/map/atcommand.c
index 2847938..6f20f2b 100644
--- a/src/map/atcommand.c
+++ b/src/map/atcommand.c
@@ -1952,9 +1952,9 @@ int atcommand_option (const int fd, struct map_session_data *sd,
     {
         if (!pc_isriding (sd))
         {                       // sd have the new value...
-            if (sd->status.class == 13)
-                sd->status.class = sd->view_class = 7;
-            else if (sd->status.class == 21)
+//            if (sd->status.class == 13)
+//                sd->status.class = sd->view_class = 7;
+            if (sd->status.class == 21)
                 sd->status.class = sd->view_class = 14;
             else if (sd->status.class == 4014)
                 sd->status.class = sd->view_class = 4008;
@@ -1972,9 +1972,9 @@ int atcommand_option (const int fd, struct map_session_data *sd,
             }
             else
             {
-                if (sd->status.class == 7)
-                    sd->status.class = sd->view_class = 13;
-                else if (sd->status.class == 14)
+//                if (sd->status.class == 7)
+//                    sd->status.class = sd->view_class = 13;
+                if (sd->status.class == 14)
                     sd->status.class = sd->view_class = 21;
                 else if (sd->status.class == 4008)
                     sd->status.class = sd->view_class = 4014;
@@ -4191,9 +4191,9 @@ int atcommand_character_option (const int fd, struct map_session_data *sd,
             {
                 if (!pc_isriding (pl_sd))
                 {               // pl_sd have the new value...
-                    if (pl_sd->status.class == 13)
-                        pl_sd->status.class = pl_sd->view_class = 7;
-                    else if (pl_sd->status.class == 21)
+//                    if (pl_sd->status.class == 13)
+//                        pl_sd->status.class = pl_sd->view_class = 7;
+                    if (pl_sd->status.class == 21)
                         pl_sd->status.class = pl_sd->view_class = 14;
                     else if (pl_sd->status.class == 4014)
                         pl_sd->status.class = pl_sd->view_class = 4008;
@@ -4211,9 +4211,9 @@ int atcommand_character_option (const int fd, struct map_session_data *sd,
                     }
                     else
                     {
-                        if (pl_sd->status.class == 7)
-                            pl_sd->status.class = pl_sd->view_class = 13;
-                        else if (pl_sd->status.class == 14)
+//                        if (pl_sd->status.class == 7)
+//                            pl_sd->status.class = pl_sd->view_class = 13;
+                        if (pl_sd->status.class == 14)
                             pl_sd->status.class = pl_sd->view_class = 21;
                         else if (pl_sd->status.class == 4008)
                             pl_sd->status.class = pl_sd->view_class = 4014;
@@ -6464,12 +6464,12 @@ int atcommand_mount_peco (const int fd, struct map_session_data *sd,
 
     if (!pc_isriding (sd))
     {                           // if actually no peco
-        if (sd->status.class == 7 || sd->status.class == 14
+        if (/*sd->status.class == 7 ||*/ sd->status.class == 14
             || sd->status.class == 4008 || sd->status.class == 4015)
         {
-            if (sd->status.class == 7)
-                sd->status.class = sd->view_class = 13;
-            else if (sd->status.class == 14)
+//            if (sd->status.class == 7)
+//                sd->status.class = sd->view_class = 13;
+            if (sd->status.class == 14)
                 sd->status.class = sd->view_class = 21;
             else if (sd->status.class == 4008)
                 sd->status.class = sd->view_class = 4014;
@@ -6486,9 +6486,9 @@ int atcommand_mount_peco (const int fd, struct map_session_data *sd,
     }
     else
     {
-        if (sd->status.class == 13)
-            sd->status.class = sd->view_class = 7;
-        else if (sd->status.class == 21)
+//        if (sd->status.class == 13)
+//            sd->status.class = sd->view_class = 7;
+        if (sd->status.class == 21)
             sd->status.class = sd->view_class = 14;
         else if (sd->status.class == 4014)
             sd->status.class = sd->view_class = 4008;
@@ -6533,12 +6533,12 @@ int atcommand_char_mount_peco (const int fd, struct map_session_data *sd,
 
         if (!pc_isriding (pl_sd))
         {                       // if actually no peco
-            if (pl_sd->status.class == 7 || pl_sd->status.class == 14
+            if (/*pl_sd->status.class == 7 || */pl_sd->status.class == 14
                 || pl_sd->status.class == 4008 || pl_sd->status.class == 4015)
             {
-                if (pl_sd->status.class == 7)
-                    pl_sd->status.class = pl_sd->view_class = 13;
-                else if (pl_sd->status.class == 14)
+//                if (pl_sd->status.class == 7)
+//                    pl_sd->status.class = pl_sd->view_class = 13;
+                if (pl_sd->status.class == 14)
                     pl_sd->status.class = pl_sd->view_class = 21;
                 else if (pl_sd->status.class == 4008)
                     pl_sd->status.class = pl_sd->view_class = 4014;
@@ -6555,9 +6555,9 @@ int atcommand_char_mount_peco (const int fd, struct map_session_data *sd,
         }
         else
         {
-            if (pl_sd->status.class == 13)
-                pl_sd->status.class = pl_sd->view_class = 7;
-            else if (pl_sd->status.class == 21)
+//            if (pl_sd->status.class == 13)
+//                pl_sd->status.class = pl_sd->view_class = 7;
+            if (pl_sd->status.class == 21)
                 pl_sd->status.class = pl_sd->view_class = 14;
             else if (pl_sd->status.class == 4014)
                 pl_sd->status.class = pl_sd->view_class = 4008;
diff --git a/src/map/clif.c b/src/map/clif.c
index 0eceedf..c89f491 100644
--- a/src/map/clif.c
+++ b/src/map/clif.c
@@ -1351,7 +1351,7 @@ int clif_spawnpc (struct map_session_data *sd)
         pc_setoption (sd, sd->status.option | 0x0020);  // [Valaris]
 
     if ((pc_isriding (sd) && pc_checkskill (sd, KN_RIDING) > 0)
-        && (sd->status.class == 7 || sd->status.class == 14
+        && (/*sd->status.class == 7 ||*/ sd->status.class == 14
             || sd->status.class == 4008 || sd->status.class == 4015))
         pc_setriding (sd);      // update peco riders for people upgrading athena [Valaris]
 
@@ -8199,8 +8199,8 @@ void clif_parse_RemoveOption (int fd __attribute__ ((unused)), struct map_sessio
 {
     if (pc_isriding (sd))
     {                           // jobchange when removing peco [Valaris]
-        if (sd->status.class == 13)
-            sd->status.class = sd->view_class = 7;
+//        if (sd->status.class == 13)
+//            sd->status.class = sd->view_class = 7;
 
         if (sd->status.class == 21)
             sd->status.class = sd->view_class = 14;
diff --git a/src/map/pc.c b/src/map/pc.c
index c63a076..9c2b95d 100644
--- a/src/map/pc.c
+++ b/src/map/pc.c
@@ -7339,8 +7339,8 @@ int pc_setriding (struct map_session_data *sd)
     {                           // ���C�f�B���O�X�L������
         pc_setoption (sd, sd->status.option | 0x0020);
 
-        if (sd->status.class == 7)
-            sd->status.class = sd->view_class = 13;
+//        if (sd->status.class == 7)
+//            sd->status.class = sd->view_class = 13;
 
         if (sd->status.class == 14)
             sd->status.class = sd->view_class = 21;
-- 
2.1.0

